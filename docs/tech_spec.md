Отлично, понял ✅
Сейчас не код и не результаты, а именно **полное техническое задание (ТЗ)** для модели протона на основе твоей концепции «три тора» в SU(2)/SU(3)-рамках. Я соберу строгое ТЗ в формате документа с разделами: цели, формулы, параметры, требования к вычислительным процедурам и список того, что ещё нужно реализовать.

---

# **Техническое задание (ТЗ) на модель протона**

## 1. Цель работы

Создать численно реализуемую модель протона как топологического солитона в рамках SU(2)/SU(3) Skyrme-подобной теории, основанную на трёх тороидальных структурах («120°», «клевер», «декартовая») с корректным воспроизведением:

* электрического заряда $Q = +1$,
* барионного числа $B = 1$,
* массы протона $M_p \approx 938.272\,\text{МэВ}$,
* радиуса по зарядовому распределению $r_E \approx 0.84\,\text{фм}$,
* магнитного момента $\mu_p \approx 2.793\,\mu_N$.

## 2. Основные формулы

### 2.1 Поле

$$
U(\mathbf{x}) \in SU(2), \quad U = \cos f(r)\, \mathbf{1} + i \sin f(r)\, \hat{n}(\mathbf{x}) \cdot \vec{\sigma}
$$

где:

* $f(r)$ — радиальный профиль,
* $\hat{n}(\mathbf{x})$ — усреднённое направление, определяемое тремя тороидальными касательными.

### 2.2 Плотность энергии

$$
\mathcal{E} = c_2\, \text{Tr}(L_i L_i) 
+ c_4\, \text{Tr}([L_i,L_j]^2) 
+ c_6 \, b_0^2
$$

где:

* $L_i = U^\dagger \partial_i U$,
* $b_0$ — плотность барионного заряда.

### 2.3 Барионное число

$$
B = -\frac{1}{24\pi^2} \int \epsilon^{ijk}\,\text{Tr}(L_i L_j L_k)\, d^3x
$$

### 2.4 Электрический заряд

Через нормировку плотности $\rho(\mathbf{x})$ (пропорциональной $|\psi|^2$ вблизи тора):

$$
Q = \int \rho(\mathbf{x})\, d^3x \quad \overset{!}{=} +1
$$

### 2.5 Радиус

$$
r_{\rm rms} = \sqrt{\frac{\int r^2 \rho(\mathbf{x}) d^3x}{\int \rho(\mathbf{x}) d^3x}}
$$

### 2.6 Виреальное условие

$$
E_{(2)} = E_{(4)} \quad \text{(баланс 50–50)}
$$

### 2.7 Магнитный момент

После квантования коллективных координат (FR-условия + Wess–Zumino–Witten член):

$$
\mu_p = \frac{e}{2M_p}\, \langle p, \uparrow | \int \mathbf{r}\times \mathbf{j}(\mathbf{x})\, d^3x | p, \uparrow \rangle
$$

---

## 3. Ключевые критерии проверки

1. **Баланс энергии**:
   $\frac{E_{(2)}}{E_{\rm tot}} = \frac{E_{(4)}}{E_{\rm tot}} = 50\%$.
   Дополнительно: диагностическая метрика «25–50–25» для зон разрежения вдоль тора.

2. **Инварианты**:

   * $Q \approx +1$,
   * $B \approx 1$ (допустимо отклонение ≤ 5%).

3. **Физические параметры**:

   * $r_E = 0.84 \pm 0.02$ фм,
   * $M_p = 938 \pm 10$ МэВ,
   * $\mu_p = 2.793 \pm 0.1\,\mu_N$.

---

## 4. Что реализовано

* Построение SU(2)-поля с тройкой тороидальных направлений (A,B,C).
* Встраивание через «ежа» (hedgehog homotopy), исправляющее топологию.
* Расчёт $E_{(2)}, E_{(4)}, B, Q, r_{rms}, M$.
* Единая калибровка по 120° конфигурации.

---

## 5. Что требуется доработать

1. **Численная релаксация**

   * Градиентный спуск (или L-BFGS) с проекцией на SU(2).
   * Жёсткое сохранение $B=1$, $Q=+1$.
   * Контроль 50–50 баланса.

2. **Шестой член стабилизатора**

   * Добавить $c_6 b_0^2$, варьировать константу $c_6$, чтобы стабилизировать размер.

3. **WZW и FR-ограничения**

   * Добавить Wess–Zumino–Witten член.
   * Ввести квантование коллективных координат.
   * Проверить спин 1/2 и фермионную природу.

4. **Электромагнитные токи**

   * Ввести токи $j_\mu$ из SU(2) поля.
   * Вычислить магнитный момент и форм-факторы $G_E, G_M(Q^2)$.

5. **Сравнение конфигураций**

   * Пересчитать A,B,C при общей калибровке.
   * Сравнить по $(M,r_E,\mu_p,B,Q)$.
   * Ранжировать устойчивость.

6. **Масштабирование сетки**

   * Проверить сходимость при увеличении N (например, 64³, 96³).
   * Анализ чувствительности к размеру коробки.

---

## 6. Формат отчётности

* Таблицы для каждой конфигурации: $Q, B, M, r_E, \mu_p$.
* Логи с вкладом энергий $E_{(2)}, E_{(4)}, E_{(6)}$.
* Графики распределений (радиальная плотность, зоны 25–50–25).
* Отдельные результаты для **стационарного состояния** и для **динамики столкновений**.

---

