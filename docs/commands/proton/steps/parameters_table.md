# Таблица входных параметров модели протона

**Author:** Vasiliy Zdanovskiy  
**Email:** vasilyvz@gmail.com

## 1. Обзор параметров

### 1.1 Категории параметров

1. **Геометрические параметры** - размеры и формы тороидальных структур
2. **Параметры профилей** - формы радиальных и угловых профилей
3. **Константы Skyrme** - коэффициенты в плотности энергии
4. **Параметры ограничений** - веса для множителей Лагранжа
5. **Численные параметры** - настройки сетки и алгоритмов

### 1.2 Единицы измерения

- **Длина:** фм (фемтометр)
- **Энергия:** МэВ (мегаэлектронвольт)
- **Углы:** радианы
- **Безразмерные:** единицы

## 2. Геометрические параметры

### 2.1 Тороидальные структуры

| Параметр | Описание | Единицы | Значение по умолчанию | Диапазон | Примечания |
|----------|----------|---------|----------------------|----------|------------|
| `R_torus` | Радиус тора | фм | 1.0 | 0.5 - 2.0 | Основной размер тора |
| `r_torus` | Толщина тора | фм | 0.2 | 0.1 - 0.5 | Толщина стенки тора |
| `d_torus` | Расстояние между торами | фм | 1.5 | 1.0 - 3.0 | Для многоторных конфигураций |
| `theta_120` | Угол между торами (120° конфигурация) | рад | 2π/3 | 2π/3 ± 0.1 | Фиксированный для симметрии |
| `theta_clover` | Угол между торами (клевер конфигурация) | рад | π/2 | π/2 ± 0.1 | Фиксированный для симметрии |

### 2.2 Система координат

| Параметр | Описание | Единицы | Значение по умолчанию | Диапазон | Примечания |
|----------|----------|---------|----------------------|----------|------------|
| `grid_size` | Размер сетки (N×N×N) | безразмерный | 64 | 32, 64, 128, 256 | Должен быть степенью 2 |
| `box_size` | Размер расчетной коробки | фм | 4.0 | 2.0 - 8.0 | Должен быть > 2×R_torus |
| `dx` | Шаг сетки | фм | box_size/grid_size | - | Вычисляется автоматически |

### 2.3 Конфигурации торов

| Конфигурация | Количество торов | Симметрия | Описание |
|--------------|------------------|-----------|----------|
| `120deg` | 3 | C₃ | Три тора под углом 120° |
| `clover` | 4 | C₄ | Четыре тора в форме клевера |
| `cartesian` | 3 | D₄ | Три тора вдоль осей x, y, z |

## 3. Параметры профилей

### 3.1 Радиальный профиль f(r)

| Параметр | Описание | Единицы | Значение по умолчанию | Диапазон | Примечания |
|----------|----------|---------|----------------------|----------|------------|
| `f_0` | Значение в центре | рад | π | π ± 0.1 | Граничное условие |
| `f_inf` | Значение на бесконечности | рад | 0 | 0 ± 0.01 | Граничное условие |
| `r_scale` | Масштабный радиус | фм | 1.0 | 0.5 - 2.0 | Характерный размер |
| `profile_type` | Тип профиля | - | "tanh" | "tanh", "exp", "gaussian" | Функциональная форма |

### 3.2 Угловой профиль χ(θ)

| Параметр | Описание | Единицы | Значение по умолчанию | Диапазон | Примечания |
|----------|----------|---------|----------------------|----------|------------|
| `chi_0` | Амплитуда углового профиля | рад | π/2 | 0 - π | Сила угловой модуляции |
| `theta_scale` | Масштабный угол | рад | π/6 | π/12 - π/3 | Ширина углового профиля |
| `chi_type` | Тип углового профиля | - | "cos" | "cos", "sin", "gaussian" | Функциональная форма |

### 3.3 Параметры тороидальных направлений

| Параметр | Описание | Единицы | Значение по умолчанию | Диапазон | Примечания |
|----------|----------|---------|----------------------|----------|------------|
| `n_strength` | Сила поля в торе | безразмерный | 1.0 | 0.5 - 2.0 | Весовая функция |
| `n_thickness` | Толщина весовой функции | фм | 0.2 | 0.1 - 0.5 | Ширина распределения |
| `n_type` | Тип весовой функции | - | "gaussian" | "gaussian", "lorentzian" | Функциональная форма |

## 4. Константы Skyrme

### 4.1 Основные константы

| Параметр | Описание | Единицы | Значение по умолчанию | Диапазон | Примечания |
|----------|----------|---------|----------------------|----------|------------|
| `c2` | Константа кинетической энергии | МэВ | 1.0 | 0.1 - 10.0 | Tr(L_i L_i) |
| `c4` | Константа энергии взаимодействия | МэВ·фм² | 1.0 | 0.1 - 10.0 | Tr([L_i,L_j]²) |
| `c6` | Константа стабилизирующего члена | МэВ·фм⁴ | 1.0 | 0.1 - 10.0 | b₀² |

### 4.2 Электромагнитные константы

| Параметр | Описание | Единицы | Значение по умолчанию | Диапазон | Примечания |
|----------|----------|---------|----------------------|----------|------------|
| `e` | Элементарный заряд | безразмерный | 0.303 | 0.1 - 0.5 | Связан с α |
| `alpha_em` | Постоянная тонкой структуры | безразмерный | 1/137.036 | - | Фиксированная |
| `mu_0` | Магнитная постоянная | безразмерный | 1.0 | - | В единицах c=1 |

### 4.3 Фазовые константы

| Параметр | Описание | Единицы | Значение по умолчанию | Диапазон | Примечания |
|----------|----------|---------|----------------------|----------|------------|
| `f_phi` | Константа фазового поля | МэВ | 1.0 | 0.1 - 10.0 | Жесткость фазы |
| `beta_4` | Константа 4-производного члена | МэВ·фм² | 1.0 | 0.1 - 10.0 | Нелинейность |
| `gamma_6` | Константа 6-производного члена | МэВ·фм⁴ | 1.0 | 0.1 - 10.0 | Стабилизация |

## 5. Параметры ограничений

### 5.1 Множители Лагранжа

| Параметр | Описание | Единицы | Значение по умолчанию | Диапазон | Примечания |
|----------|----------|---------|----------------------|----------|------------|
| `lambda_B` | Вес для барионного числа | МэВ | 1000.0 | 100 - 10000 | B = 1 |
| `lambda_Q` | Вес для электрического заряда | МэВ | 1000.0 | 100 - 10000 | Q = +1 |
| `lambda_virial` | Вес для виреального условия | МэВ | 1000.0 | 100 - 10000 | Наведение E₂ = E₄ + 3E₆ (при c₆=0 → 50:50) |

### 5.2 Допуски

| Параметр | Описание | Единицы | Значение по умолчанию | Диапазон | Примечания |
|----------|----------|---------|----------------------|----------|------------|
| `tolerance_B` | Допуск для барионного числа | безразмерный | 0.02 | 0.01 - 0.05 | |B - 1| ≤ tolerance_B |
| `tolerance_Q` | Допуск для электрического заряда | безразмерный | 1e-6 | 1e-8 - 1e-4 | |Q - 1| ≤ tolerance_Q |
| `tolerance_virial` | Допуск для виреального условия | безразмерный | 0.01 | 0.005 - 0.02 | |E₂/E₄ - 0.5| ≤ tolerance_virial |

## 6. Численные параметры

### 6.1 Алгоритм релаксации

| Параметр | Описание | Единицы | Значение по умолчанию | Диапазон | Примечания |
|----------|----------|---------|----------------------|----------|------------|
| `max_iterations` | Максимальное количество итераций | безразмерный | 1000 | 100 - 10000 | Ограничение времени |
| `convergence_tol` | Критерий сходимости | безразмерный | 1e-6 | 1e-8 - 1e-4 | Точность решения |
| `step_size` | Размер шага | безразмерный | 0.01 | 0.001 - 0.1 | Скорость сходимости |
| `relaxation_method` | Метод релаксации | - | "gradient_descent" | "gradient_descent", "lbfgs" | Алгоритм оптимизации |

### 6.2 Параметры интегрирования

| Параметр | Описание | Единицы | Значение по умолчанию | Диапазон | Примечания |
|----------|----------|---------|----------------------|----------|------------|
| `integration_method` | Метод интегрирования | - | "trapezoidal" | "trapezoidal", "simpson", "gauss" | Алгоритм интегрирования |
| `integration_tol` | Точность интегрирования | безразмерный | 1e-8 | 1e-10 - 1e-6 | Точность интегралов |
| `adaptive_integration` | Адаптивное интегрирование | логический | True | - | Автоматическая точность |

### 6.3 Параметры CUDA

| Параметр | Описание | Единицы | Значение по умолчанию | Диапазон | Примечания |
|----------|----------|---------|----------------------|----------|------------|
| `use_cuda` | Использовать CUDA | логический | True | - | Ускорение вычислений |
| `cuda_device` | Номер CUDA устройства | безразмерный | 0 | 0 - 7 | Выбор GPU |
| `block_size` | Размер блока CUDA | безразмерный | 256 | 128, 256, 512 | Оптимизация производительности |
| `shared_memory` | Использовать shared memory | логический | True | - | Оптимизация памяти |

## 7. Параметры валидации

### 7.1 Физические константы

| Параметр | Описание | Единицы | Значение по умолчанию | Диапазон | Примечания |
|----------|----------|---------|----------------------|----------|------------|
| `target_mass` | Целевая масса протона | МэВ | 938.272 | 938.266 - 938.278 | Экспериментальное значение |
| `target_radius` | Целевой радиус | фм | 0.841 | 0.822 - 0.860 | Экспериментальное значение |
| `target_magnetic_moment` | Целевой магнитный момент | μN | 2.793 | 2.792 - 2.794 | Экспериментальное значение |

### 7.2 Допуски валидации

| Параметр | Описание | Единицы | Значение по умолчанию | Диапазон | Примечания |
|----------|----------|---------|----------------------|----------|------------|
| `mass_tolerance` | Допуск для массы | МэВ | 0.006 | 0.001 - 0.01 | Экспериментальная точность |
| `radius_tolerance` | Допуск для радиуса | фм | 0.019 | 0.005 - 0.05 | Экспериментальная точность |
| `magnetic_moment_tolerance` | Допуск для магнитного момента | μN | 0.001 | 0.0001 - 0.01 | Экспериментальная точность |

## 8. Конфигурационные файлы

### 8.1 JSON конфигурация

```json
{
  "geometry": {
    "R_torus": 1.0,
    "r_torus": 0.2,
    "d_torus": 1.5,
    "grid_size": 64,
    "box_size": 4.0
  },
  "profiles": {
    "f_0": 3.14159,
    "f_inf": 0.0,
    "r_scale": 1.0,
    "profile_type": "tanh"
  },
  "skyrme": {
    "c2": 1.0,
    "c4": 1.0,
    "c6": 1.0
  },
  "constraints": {
    "lambda_B": 1000.0,
    "lambda_Q": 1000.0,
    "lambda_virial": 1000.0
  },
  "numerical": {
    "max_iterations": 1000,
    "convergence_tol": 1e-6,
    "step_size": 0.01
  }
}
```

### 8.2 Python конфигурация

```python
class ProtonModelConfig:
    def __init__(self):
        # Геометрические параметры
        self.R_torus = 1.0
        self.r_torus = 0.2
        self.d_torus = 1.5
        self.grid_size = 64
        self.box_size = 4.0
        
        # Параметры профилей
        self.f_0 = np.pi
        self.f_inf = 0.0
        self.r_scale = 1.0
        self.profile_type = "tanh"
        
        # Константы Skyrme
        self.c2 = 1.0
        self.c4 = 1.0
        self.c6 = 1.0
        
        # Параметры ограничений
        self.lambda_B = 1000.0
        self.lambda_Q = 1000.0
        self.lambda_virial = 1000.0
        
        # Численные параметры
        self.max_iterations = 1000
        self.convergence_tol = 1e-6
        self.step_size = 0.01
```

## 9. Процедура настройки параметров

### 9.1 Последовательность настройки

1. **Геометрические параметры** - задать размеры и формы
2. **Параметры профилей** - настроить функциональные формы
3. **Константы Skyrme** - подобрать для правильной энергии
4. **Параметры ограничений** - настроить веса
5. **Численные параметры** - оптимизировать сходимость

### 9.2 Критерии настройки

- **Физические параметры** в пределах экспериментальных допусков
- **Энергетический баланс** E₂:E₄ = 50:50 ± 1%
- **Сходимость** за разумное время
- **Стабильность** решения

### 9.3 Автоматическая настройка

```python
def auto_tune_parameters(config, target_values):
    """
    Автоматическая настройка параметров.
    
    Args:
        config: Конфигурация модели
        target_values: Целевые значения физических параметров
        
    Returns:
        Оптимизированная конфигурация
    """
    # Алгоритм оптимизации параметров
    # (например, градиентный спуск или генетический алгоритм)
    pass
```

## 10. Валидация параметров

### 10.1 Проверка диапазонов

- Все параметры должны быть в допустимых диапазонах
- Физические константы должны быть положительными
- Углы должны быть в диапазоне [0, 2π]

### 10.2 Проверка согласованности

- Размер коробки должен быть больше размеров торов
- Шаг сетки должен быть достаточно мал
- Константы должны быть согласованы по размерности

### 10.3 Проверка сходимости

- Алгоритм должен сходиться за разумное время
- Решение должно быть стабильным
- Физические параметры должны быть в пределах допусков
